<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="paper-card.html">
<link rel="import" href="shared-styles.html">

<link rel="import" href="../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/app-route/app-location.html">

<link rel="import" href="resource-list-object.html">

<!-- Service Tags:  email, phone, in-person, peer, facebook -->

<dom-module id="sws-list-view">
<template>
    <style include="shared-styles">
        :host {
            display: block;

            padding: 10px;
        }
    </style>
  <div class="top-header">
      <!--<div class="circle">L</div>-->
      <p>Currently viewing resources that are classified as: {{filter}}</p>

  </div>

  <div class="thick-card">
    <div class="notes">
	  <template is="dom-repeat" items="{{resources}}" as="note" filter="{{computeFilter(filter)}}">
		<!-- This is an object responsible for displaying a resource's information tab -->
		<resource-list-object resource="[[note]]"></resource-list-object>
	  </template>
    </div>
  </div>

</template>
<!-- 
The computeFilter(string) is the magic behind the filtering
 - It takes an argument 'filter' which is the subroute passed by sws-main
 - It then returns a function which will be used for this instance of sws-list-view
To make the filtering more advanced, edit the return function(note)
 - 'note.type' is the type id in the database
 - 'string' is the current subroute
Currently it can only filter one category.
TODO:
 - Make it turn note.type and string into arrays and compare if everything in [string] is in [note.type]
 -->
<script>
  Polymer({
    is: 'sws-list-view',
	
	computeFilter(string){
		if (!string){
			return null;
		} else {
			return function(note) {
				if(string.substr(1) == 'view-all'){
					return true;
				}
				return note.type.includes(string.substr(1));
			}
		}
	}
	  	  
  });
</script>

</dom-module>