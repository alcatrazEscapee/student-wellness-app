<!-- Required Bower Dependencies -->
<link rel="import" href="../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<!-- Application Shell Architecture -->
<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/iron-iconset-svg/iron-iconset-svg.html">

<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">

<link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">


<!-- import custom-style element -->
<link rel="import" href="../bower_components/polymer/lib/elements/custom-style.html">
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">
<!-- loading pages -->
<link rel="import" href="resource-list-object.html">
<link rel="import" href="sws-home-view.html">
<link rel="import" href="sws-list-view.html">
<link rel="import" href="sws-view404.html">
<link rel="import" href="sample-content.html">
<link rel="import" href="sws-individual-vew.html">

<dom-module id="sws-app">

  <template>

    <style>

    app-drawer-layout:not([narrow]) [drawer-toggle] {
      display: none;
    }

    app-drawer section {
      height: 100%;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    app-drawer h2 {
      margin: 8px 0 0;
      padding: 18px;
      font-size: 18px;
    }

    app-drawer paper-checkbox {
      display: block;
      padding: 18px;
    }

    app-header {
      color: #fff;
      background-color: #C62828;
      --app-header-background-front-layer: {
        background-image: url(images/shellbackground.jpg);
        background-position: 50% 10%;
      };
    }

    [main-title] {
        font-size: 7.27vmin;
        font-weight:500;
    }

    </style>

    <!-- This is the configuration used for all the children of this module -->

	<firebase-query
      id="query"
      app-name="sws-main"
      path="/resources"
      data="{{resources}}">
	</firebase-query>

	<app-indexeddb-mirror
      key="resources"
      data="{{resources}}"
      persisted-data="{{persistedResources}}">
	</app-indexeddb-mirror>

	<!-- app-location binds to the app's URL -->
	<app-location route="{{route}}" use-hash-as-path></app-location>

	<!-- this app-route manages the top-level routes -->
    <app-route
        route="{{route}}"
        pattern="/:view"
        data="{{routeData}}"
        tail="{{subroute}}">
	</app-route>
      <!-- ------------------------------------------- -->
      <!-- --------Nalsen---------------Alex---------- -->
      <!-- ------------------------------------------- -->
      <!-- ------------------CONTENT------------------ -->
      <!-- ------------------------------------------- -->
      <!-- ------did---------good----------job-------- -->
      <!-- ------------------------------------------- -->
    <app-drawer-layout>
      <!-- drawer -->
      <app-drawer swipe-open drawer.close() slot="drawer">
        <!-- drawer content -->
        <section>
          <details>
              <summary><h1>Display Settings</h1></summary>
                      <details>
                          <summary><h2>App-header Properties</h2></summary>
                          <nav>
                              <a>
                                  <paper-checkbox checked="{{condenses}}">
                                      condenses
                                  </paper-checkbox>
                                  <paper-checkbox checked="{{fixed}}">
                                      fixed
                                  </paper-checkbox>
                                  <paper-checkbox checked="{{reveals}}">
                                      reveals
                                  </paper-checkbox>
                                  <paper-checkbox checked="{{shadow}}">
                                      shadow
                                  </paper-checkbox>
                              </a>
                          </nav>
                      </details>

                      <details>
                          <summary><h2>App-header Effects</h2></summary>
                          <nav>
                              <a>
                                  <paper-checkbox checked="{{blendBackground}}">
                                      blend-background
                                  </paper-checkbox>
                                  <paper-checkbox checked="{{fadeBackground}}">
                                      fade-background
                                  </paper-checkbox>
                                  <paper-checkbox checked="{{parallaxBackground}}">
                                      parallax-background
                                  </paper-checkbox>
                                  <paper-checkbox checked="{{resizeSnappedTitle}}">
                                      resize-snapped-title
                                  </paper-checkbox>
                                  <paper-checkbox checked="{{resizeTitle}}">
                                      resize-title
                                  </paper-checkbox>
                                  <paper-checkbox checked="{{waterfall}}">
                                      waterfall
                                  </paper-checkbox>
                              </a>
                          </nav>
                      </details>


          </details>
          <details>
              <summary><h1>About</h1></summary>
              <nav>
                  <a>
                      <p>
                          Ea duis bonorum nec, falli paulo aliquid ei eum.
                          Usu eu novum principes, vel quodsi aliquip ea.
                          Has at minim mucius aliquam, est id tempor laoreet.
                          Pro saepe pertinax ei, ad pri animal labores suscipiantur.
                      </p>
                  </a>
              </nav>
          </details>
        </section>
      </app-drawer>
      <!-- navbar -->
      <app-header-layout>

        <app-header
            condenses="[[condenses]]"
            fixed="[[fixed]]"
            reveals="[[reveals]]"
            shadow="[[shadow]]"
            effects="[[_computeEffects(blendBackground, fadeBackground, parallaxBackground, resizeSnappedTitle, resizeTitle, waterfall)]]"
            slot="header">

            <app-toolbar>
                <paper-icon-button icon="app:menu" drawer-toggle></paper-icon-button>
                <div condensed-title>Student Resource App</div>
                <a href="https://github.com/alcatrazEscapee/student-wellness-app" tabindex="-1">
                    <paper-icon-button src="https://assets-cdn.github.com/images/modules/logos_page/Octocat.png" alt="github" title="github"></paper-icon-button>
                </a>
                <a href="http://www.queensu.ca/" tabindex="-1">
                    <paper-icon-button src="src/images/queenslogo.png" alt="queens" title="queens"></paper-icon-button>
                </a>
            </app-toolbar>

            <app-toolbar>
            <div main-title spacer>Student Resource App</div>
          </app-toolbar>

        </app-header>

          <!-- iron-pages controls which page is currently visible -->
          <iron-pages role="main"
                      selected="[[routeData.view]]"
                      attr-for-selected="name"
                      selected-attribute="visible"
                      fallback-selection="home">
              <!-- Home Pages with resource sorting buttons -->
              <sws-home-view name="home"></sws-home-view>
              <!-- List of resources -->
              <sws-list-view name="list" resources="{{persistedResources}}" filter="{{subroute.path}}"></sws-list-view>
              <!-- Viewing one resource at a time -->
              <sws-individual-view
                      name="view"
                      resources="{{persistedResources}}"
                      target="{{subroute.path}}">
              </sws-individual-view>
          </iron-pages>


      </app-header-layout>

    </app-drawer-layout>


   <!--
      @Deprecated - Moved to sws-list-view
      <div class="notes">
        <template is="dom-repeat" items="[[persistedResources]]" as="note" filter="isMental">

        <resource-list-object resource="[[note]]"></resource-list-object>
       </template>
      </div>
    -->

  </template>

  <script>

  Polymer({

    is: 'sws-app',

    properties: {

      condenses: {
        type: Boolean,
        value: true
      },

      fixed: {
        type: Boolean,
        value: true
      },

      reveals: {
        type: Boolean,
        value: false
      },

      shadow: {
        type: Boolean,
        value: false
      },

      blendBackground: {
        type: Boolean,
        value: true
      },

      fadeBackground: {
        type: Boolean,
        value: false
      },

      parallaxBackground: {
        type: Boolean,
        value: true
      },

      resizeSnappedTitle: {
        type: Boolean,
        value: false
      },

      resizeTitle: {
        type: Boolean,
        value: true
      },

      waterfall: {
        type: Boolean,
        value: true
      }

    },

    observers: [
      '_removeIf("fixed", reveals)',
      '_removeIf("reveals", fixed)',
      '_removeIf("shadow", waterfall)',
      '_removeIf("blendBackground", fadeBackground)',
      '_removeIf("fadeBackground", blendBackground)',
      '_removeIf("resizeSnappedTitle", resizeTitle)',
      '_removeIf("resizeTitle", resizeSnappedTitle)',
      '_removeIf("waterfall", shadow)'
    ],

    _computeEffects: function() {
      return [
        this.blendBackground ? 'blend-background ' : '',
        this.fadeBackground ? 'fade-background ' : '',
        this.parallaxBackground ? 'parallax-background ' : '',
        this.resizeSnappedTitle ? 'resize-snapped-title ' : '',
        this.resizeTitle ? 'resize-title ' : '',
        this.waterfall ? 'waterfall ' : ''
      ].join('');
    },

    _removeIf: function(propName, value) {
      if (this[propName] && value) {
        this[propName] = false;
      }
    }

  });

  </script>

</dom-module>
