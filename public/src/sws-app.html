<!-- Required Bower Dependencies -->
<link rel="import" href="../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<!-- Application Shell Architecture -->
<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/iron-iconset-svg/iron-iconset-svg.html">

<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">

<link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">


<!-- import custom-style element -->
<link rel="import" href="../bower_components/polymer/lib/elements/custom-style.html">
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">
<!-- loading pages -->
<link rel="import" href="resource-list-object.html">
<link rel="import" href="sws-home-view.html">
<link rel="import" href="sws-list-view.html">
<link rel="import" href="sws-view404.html">
<link rel="import" href="sample-content.html">
<link rel="import" href="sws-individual-vew.html">

<iron-iconset-svg name="app" size="24">
<svg><defs>
<g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></g>
</defs></svg>
</iron-iconset-svg>

<dom-module id="sws-app">

  <template>

    <style>
    app-drawer-layout:not([narrow]) [drawer-toggle] {
      display: none;
    }
    app-drawer section {
      height: 100%;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    details {
        border: 1px solid #E1E1E1;
        border-radius: 5px;
        box-shadow: 0 1px 4px rgba(0, 0, 0, .4);
        color: #363636;
        margin: 0 0 .4em;
        padding: 1%;
    }
    details[open] {
        background: #E1E1E1;
    }
    summary {
        background: -webkit-linear-gradient(top, #FAFAFA 50%, #E1E1E1 50%);
        border-radius: 5px;
        cursor: pointer;
        font-size: .8em;
        font-weight: bold;
        margin: -1%;
        padding: 8px 0;
        position: relative;
        width: 102%;
    }
    summary:hover, details[open] summary {
        background: #E1E1E1;
    }
    summary::-webkit-details-marker {
        display: none
    }
    summary:before{
        border-radius: 5px; content: "+";
        color: #363636;
        display: block;
        float: left;
        font-size: 1.5em;
        font-weight: bold;
        margin: -2px 10px 0 10px;
        padding: 0;
        text-align: center;
        width: 20px;
    }
    details[open] summary:before {
        content: "-";
        margin-top: -4px;
    }
    p {
        font-size: .8em;
    }
    nav a {
        display: block;
    }
    app-drawer h2 {
      margin: 8px 0 0;
      padding: 18px;
      font-size: 18px;
    }
    app-drawer paper-checkbox {
      display: block;
      padding: 18px;
    }
    app-header {
      color: #fff;
      background-color: #C62828;
      --app-header-background-front-layer: {
        background-image: url(images/shellbackground.jpg);
        background-position: 50% 10%;
      };
    }
    [main-title] {
      font-size: 2em;
    }
    </style>

    <!-- This is the configuration used for all the children of this module -->

	<firebase-query
      id="query"
      app-name="sws-main"
      path="/resources"
      data="{{resources}}">
	</firebase-query>

	<app-indexeddb-mirror
      key="resources"
      data="{{resources}}"
      persisted-data="{{persistedResources}}">
	</app-indexeddb-mirror>

	<!-- app-location binds to the app's URL -->
	<app-location route="{{route}}" use-hash-as-path></app-location>

	<!-- this app-route manages the top-level routes -->
    <app-route
        route="{{route}}"
        pattern="/:view"
        data="{{routeData}}"
        tail="{{subroute}}">
	</app-route>

    <app-drawer-layout>
      <!-- if adding an app-drawer, do so here -->
      
      <!-- navbar -->
      <app-header-layout>

        <app-header
            condenses="[[condenses]]"
            fixed="[[fixed]]"
            reveals="[[reveals]]"
            shadow="[[shadow]]"
            effects="[[_computeEffects(blendBackground, fadeBackground, parallaxBackground, resizeSnappedTitle, resizeTitle, waterfall)]]"
            slot="header">

            <app-toolbar>
                <paper-icon-button icon="app:menu" drawer-toggle></paper-icon-button>
                <div condensed-title>Student Resource App</div>
                <a href="https://github.com/alcatrazEscapee/student-wellness-app" tabindex="-1">
                    <paper-icon-button src="https://assets-cdn.github.com/images/modules/logos_page/Octocat.png" alt="github" title="github"></paper-icon-button>
                </a>
                <a href="http://www.queensu.ca/" tabindex="-1">
                    <paper-icon-button src="src/images/queenslogo.png" alt="queens" title="queens"></paper-icon-button>
                </a>
            </app-toolbar>

            <app-toolbar>
            <div main-title spacer>Student Resource App</div>
          </app-toolbar>

        </app-header>

          <!-- iron-pages controls which page is currently visible -->
          <iron-pages role="main"
                      selected="[[routeData.view]]"
                      attr-for-selected="name"
                      selected-attribute="visible"
                      fallback-selection="home">
              <!-- Home Pages with resource sorting buttons -->
              <sws-home-view name="home"></sws-home-view>
              <!-- List of resources -->
              <sws-list-view name="list" resources="{{persistedResources}}" filter="{{subroute.path}}"></sws-list-view>
              <!-- Viewing one resource at a time -->
              <sws-individual-view
                      name="view"
                      resources="{{persistedResources}}"
                      target="{{subroute.path}}">
              </sws-individual-view>
          </iron-pages>


      </app-header-layout>

    </app-drawer-layout>

  </template>

  <script>
  Polymer({
    is: 'sws-app',
    properties: {
      condenses: {
        type: Boolean,
        value: true
      },
      fixed: {
        type: Boolean,
        value: false
      },
      reveals: {
        type: Boolean,
        value: true
      },
      shadow: {
        type: Boolean,
        value: false
      },
      blendBackground: {
        type: Boolean,
        value: true
      },
      fadeBackground: {
        type: Boolean,
        value: false
      },
      parallaxBackground: {
        type: Boolean,
        value: true
      },
      resizeSnappedTitle: {
        type: Boolean,
        value: false
      },
      resizeTitle: {
        type: Boolean,
        value: true
      },
      waterfall: {
        type: Boolean,
        value: true
      }
    },
    _computeEffects: function() {
      return [
        this.blendBackground ? 'blend-background ' : '',
        this.fadeBackground ? 'fade-background ' : '',
        this.parallaxBackground ? 'parallax-background ' : '',
        this.resizeSnappedTitle ? 'resize-snapped-title ' : '',
        this.resizeTitle ? 'resize-title ' : '',
        this.waterfall ? 'waterfall ' : ''
      ].join('');
    }
  });
  </script>

</dom-module>